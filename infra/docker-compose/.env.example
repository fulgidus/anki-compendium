# ==============================================================================
# Anki Compendium - Development Environment Configuration
# ==============================================================================
# Copy this file to .env and update with your local settings:
#   cp .env.example .env
#
# IMPORTANT: Never commit .env file to version control!
# ==============================================================================

# ------------------------------------------------------------------------------
# PostgreSQL Configuration
# ------------------------------------------------------------------------------
# PostgreSQL 15 with pgvector extension for RAG embeddings
POSTGRES_DB=anki_compendium_dev
POSTGRES_USER=ankiuser
POSTGRES_PASSWORD=changeme

# PostgreSQL connection string (used by backend)
DATABASE_URL=postgresql://ankiuser:changeme@localhost:5432/anki_compendium_dev

# ------------------------------------------------------------------------------
# RabbitMQ Configuration
# ------------------------------------------------------------------------------
# Message broker for async tasks (PDF processing, deck generation)
RABBITMQ_DEFAULT_USER=admin
RABBITMQ_DEFAULT_PASS=changeme
RABBITMQ_DEFAULT_VHOST=/

# RabbitMQ connection string (used by backend)
RABBITMQ_URL=amqp://admin:changeme@localhost:5672/

# ------------------------------------------------------------------------------
# MinIO Configuration (S3-compatible storage)
# ------------------------------------------------------------------------------
# Object storage for PDFs and generated Anki decks
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=changeme123

# MinIO connection details (used by backend)
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=changeme123
MINIO_SECURE=false

# Default buckets
MINIO_BUCKET_PDFS=pdfs
MINIO_BUCKET_DECKS=decks

# ------------------------------------------------------------------------------
# Keycloak Configuration (Authentication & Authorization)
# ------------------------------------------------------------------------------
# Admin console credentials
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=changeme

# Keycloak database (shared PostgreSQL instance)
KEYCLOAK_DATABASE_URL=jdbc:postgresql://postgres:5432/keycloak
KEYCLOAK_DATABASE_USER=ankiuser
KEYCLOAK_DATABASE_PASSWORD=changeme

# Keycloak realm configuration
KEYCLOAK_REALM=anki-compendium
KEYCLOAK_CLIENT_ID=anki-compendium-web
KEYCLOAK_CLIENT_SECRET=your-client-secret-here

# Keycloak public URL (used by frontend)
KEYCLOAK_URL=http://localhost:8080

# ------------------------------------------------------------------------------
# OAuth Providers (Optional - for social login)
# ------------------------------------------------------------------------------
# Google OAuth 2.0
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# GitHub OAuth App
# Get credentials from: https://github.com/settings/developers
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# ------------------------------------------------------------------------------
# Application Configuration
# ------------------------------------------------------------------------------
# Environment (development, staging, production)
APP_ENV=development

# Backend API configuration
BACKEND_HOST=localhost
BACKEND_PORT=8000
BACKEND_URL=http://localhost:8000

# Frontend configuration
FRONTEND_HOST=localhost
FRONTEND_PORT=3000
FRONTEND_URL=http://localhost:3000

# Secret key for session management (generate with: openssl rand -hex 32)
SECRET_KEY=your-secret-key-here-change-in-production

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# ------------------------------------------------------------------------------
# AI/RAG Configuration
# ------------------------------------------------------------------------------
# OpenAI API (for embeddings and LLM)
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Alternatively, use local LLM (Ollama)
# OLLAMA_BASE_URL=http://localhost:11434
# OLLAMA_MODEL=llama2

# Vector database configuration
VECTOR_STORE_TYPE=pgvector
VECTOR_DIMENSION=1536

# ------------------------------------------------------------------------------
# Development Tools
# ------------------------------------------------------------------------------
# Enable debug mode
DEBUG=true

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Enable hot reload for backend
RELOAD=true

# ------------------------------------------------------------------------------
# Resource Limits
# ------------------------------------------------------------------------------
# Maximum upload file size (in MB)
MAX_UPLOAD_SIZE_MB=50

# Maximum PDF pages to process
MAX_PDF_PAGES=500

# Worker concurrency (number of parallel tasks)
WORKER_CONCURRENCY=4

# ==============================================================================
# End of Configuration
# ==============================================================================
